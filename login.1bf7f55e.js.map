{"mappings":"mkBAAA,IAAAA,EAAAC,EAAA,S,oDAuBMC,GAAM,EAAAF,EAAAG,eAXW,CACrBC,OAAQ,0CACRC,WAAY,wCACZC,UAAW,wBACXC,cAAe,oCACfC,kBAAmB,cACnBC,MAAO,2CACPC,cAAe,iBAKXC,GAAO,EAAAC,EAAAC,SAAQX,GACfY,GAAW,EAAAC,EAAAC,aAAYd,GAGvBe,EAAW,GACXC,EAAUC,SAASC,cAAc,eACjCC,EAAeF,SAASC,cAAc,uBACtCE,EAAkBH,SAASC,cAAc,0BACzCG,EAAkBC,KAAKC,MAAMC,aAAaC,QAAQ,eAyDxDR,SAASS,iBAAiB,mBAAoBC,EAAAC,EAAA,EAvDvB,WACG,OAApBP,IACFF,EAAaU,MACXR,EAAgBS,MAAMC,OAAS,EAAIV,EAAgBS,MAAQ,GAC7DV,EAAgBS,MACdR,EAAgBW,QAAQD,OAAS,EAAIV,EAAgBW,QAAU,GACjEjB,EAAgB,MAAII,EAAaU,MACjCd,EAAmB,SAAIK,EAAgBS,MACvCL,aAAaS,QAAQ,aAAcX,KAAKY,UAAUnB,I,GA+CiB,MAClEC,IAGHA,EAAQU,iBAAiB,QAASC,EAAAC,EAAA,EA/CpB,SAAAO,GACdpB,EAASoB,EAAEC,OAAOC,KAAKC,QAAUH,EAAEC,OAAOP,MAAMS,OAChDd,aAAaS,QAAQ,eAAgBX,KAAKY,UAAUnB,SAE7BwB,IAAnBxB,EAASe,QACXf,EAASe,MAAQ,SAEOS,IAAtBxB,EAASyB,WACXzB,EAASyB,SAAW,G,GAuC8B,MACpDxB,EAAQU,iBAAiB,UApCX,SAAAS,GACdA,EAAEM,iBACFzB,EAAQ0B,QACR,IAAQC,EAAoB5B,EAApB4B,SAAUb,EAAUf,EAAVe,MACdrB,EAAKmC,YACPjB,EAAAkB,GAASC,OAAOC,QAAS,+BAG3B,EAAArC,EAAAsC,4BAA2BvC,EAAMqB,EAAOa,GACrCM,MAAK,SAAAC,GAEJ,IAAMC,EAAOD,EAAeC,KAEtBC,EAAK,IAAIC,MACf,EAAAxC,EAAAyC,SAAO,EAAAzC,EAAA0C,KAAI3C,EAAU,SAAWuC,EAAKK,KAAM,CACzCC,WAAYL,IAEdzB,EAAAkB,GAASC,OAAOY,QAAS,6BACzBC,YACE,W,OACGC,OAAOC,SAAW,+D,GACrB,I,IAGHC,OAAM,SAAAC,GACaA,EAAMC,KAAxB,IACMC,EAAeF,EAAM/B,QAC3BL,EAAAkB,GAASC,OAAOoB,QAAQD,E","sources":["src/js/login.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport Notiflix from 'notiflix';\nimport throttle from 'lodash.throttle';\n\nimport {\n  getAuth,\n  onAuthStateChanged,\n  signInWithEmailAndPassword,\n} from 'firebase/auth';\n\nimport { getDatabase, ref, update } from 'firebase/database';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyDwpmuhImdY7RHC3U0YYZIshSlCJATjNaU',\n  authDomain: 'project-team-10-5792d.firebaseapp.com',\n  projectId: 'project-team-10-5792d',\n  storageBucket: 'project-team-10-5792d.appspot.com',\n  messagingSenderId: '76240638065',\n  appId: '1:76240638065:web:5518f239b638187e380bd0',\n  measurementId: 'G-CCNXH403RH',\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst database = getDatabase(app);\n\n// Inforamtion for the login\nconst formData = {};\nconst loginEl = document.querySelector('.login-form');\nconst emailInputEl = document.querySelector(\"input[name='email']\");\nconst passwordInputEl = document.querySelector(\"input[name='password']\");\nconst gettingFormData = JSON.parse(localStorage.getItem('login-form'));\n\nconst updateFormData = () => {\n  if (gettingFormData !== null) {\n    emailInputEl.value =\n      gettingFormData.email.length > 0 ? gettingFormData.email : '';\n    passwordInputEl.value =\n      gettingFormData.message.length > 0 ? gettingFormData.message : '';\n    formData['email'] = emailInputEl.value;\n    formData['password'] = passwordInputEl.value;\n    localStorage.setItem('login-form', JSON.stringify(formData));\n  }\n};\n\nconst onInput = e => {\n  formData[e.target.name.trim()] = e.target.value.trim();\n  localStorage.setItem('sign-up-form', JSON.stringify(formData));\n\n  if (formData.email === undefined) {\n    formData.email = '';\n  }\n  if (formData.username === undefined) {\n    formData.username = '';\n  }\n};\n\nconst onLogin = e => {\n  e.preventDefault();\n  loginEl.reset();\n  const { password, email } = formData;\n  if (auth.currentUser) {\n    Notiflix.Notify.warning(`You are already signed in!`);\n    return;\n  }\n  signInWithEmailAndPassword(auth, email, password)\n    .then(userCredential => {\n      // Signed in\n      const user = userCredential.user;\n\n      const dt = new Date();\n      update(ref(database, 'users/' + user.uid), {\n        last_login: dt,\n      });\n      Notiflix.Notify.success(`You are logging in now...`);\n      setTimeout(\n        () =>\n          (window.location = 'https://millenialia.github.io/project-team-10-added-features/'),\n        3000\n      );\n    })\n    .catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      Notiflix.Notify.failure(errorMessage);\n    });\n};\n\ndocument.addEventListener('DOMContentLoaded', throttle(updateFormData, 500));\nif (!loginEl) {\n  return;\n} else {\n  loginEl.addEventListener('input', throttle(onInput, 500));\n  loginEl.addEventListener('submit', onLogin);\n}\n"],"names":["$fkNhc","parcelRequire","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","$gQOBw","getAuth","database","$cokon","getDatabase","formData","loginEl","document","querySelector","emailInputEl","passwordInputEl","gettingFormData","JSON","parse","localStorage","getItem","addEventListener","$parcel$interopDefault","$dCfNN","value","email","length","message","setItem","stringify","e","target","name","trim","undefined","username","preventDefault","reset","password","currentUser","$6JpON","Notify","warning","signInWithEmailAndPassword","then","userCredential","user","dt","Date","update","ref","uid","last_login","success","setTimeout","window","location","catch","error","code","errorMessage","failure"],"version":3,"file":"login.1bf7f55e.js.map"}