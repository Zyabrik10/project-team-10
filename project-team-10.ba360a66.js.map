{"mappings":"A,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,E,E,E,O,C,c,W,O,A,E,S,O,A,G,E,Q,G,E,Q,S,C,C,C,E,E,E,O,C,U,W,O,C,EEAe,OAAA,EACb,YAAY,CAAO,CAAE,CAInB,GAHA,IAAI,CAAC,OAAO,CAAG,EACf,IAAI,CAAC,EAAE,CAAG,SAAS,cAAc,CAAC,IAAI,CAAC,OAAO,EAE1C,CAAC,IAAI,CAAC,EAAE,CAAE,MAAM,AAAI,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAEpE,CAAA,IAAI,CAAC,0BAA0B,CAAG,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,EACxE,IAAI,CAAC,4BAA4B,CAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,EAClE,IAAI,CAAC,sBAAsB,CAAG,EAAE,AAClC,CAEA,KAAK,CAAc,CAAE,CACnB,IAAI,CAAC,oBAAoB,GACzB,IAAI,CAAC,eAAe,CAAC,EACvB,CAEA,sBAAuB,CAMrB,GAJA,IAAI,CAAC,sBAAsB,CAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CACjD,6BAGE,CAAC,IAAI,CAAC,sBAAsB,CAC9B,MAAM,AAAI,MAAM,kDAElB,IAAI,CAAC,sBAAsB,CAAC,gBAAgB,CAC1C,QACA,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,GAIhC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,YAAa,CAAC,CAAA,OAAE,CAAM,CAAA,cAAE,CAAa,CAAE,IAC1D,IAAW,GAEf,IAAI,CAAC,eAAe,EACtB,EACF,CAEA,gBAAgB,CAAc,CAAE,CAE9B,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,AAAC,IACnC,EAAO,mBAAmB,CAAC,QAAS,IAAI,CAAC,4BAA4B,CACvE,GAEA,IAAI,CAAC,4BAA4B,CAAG,AAAC,CAAA,eAAgB,CAAC,EACpD,EAAE,cAAc,GACZ,AAA0B,YAA1B,OAAO,GAA+B,MAAM,EAAe,EAAG,IAAI,EACtE,IAAI,CAAC,eAAe,EACtB,CAAA,EAAG,IAAI,CAAC,IAAI,EAGZ,IAAI,CAAC,sBAAsB,CAAG,SAAS,gBAAgB,CACrD,CAAC,gBAAgB,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAGrC,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,AAAC,IACnC,EAAO,gBAAgB,CAAC,QAAS,IAAI,CAAC,4BAA4B,CACpE,EACF,CAEA,iBAAkB,CAChB,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,UACzB,OAAO,mBAAmB,CAAC,UAAW,IAAI,CAAC,0BAA0B,EACrE,SAAS,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAG,MAC5C,CAEA,wBAAwB,CAAA,IAAE,CAAG,CAAE,CAAE,CACnB,WAAR,GACJ,IAAI,CAAC,eAAe,EACtB,CAEA,iBAAkB,CAChB,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,UACtB,OAAO,gBAAgB,CAAC,UAAW,IAAI,CAAC,0BAA0B,EAClE,SAAS,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAG,QAC5C,CACF,C,G,I,E,E,S,E,S,I,E,E,S,E,E,SCzEC,AAAA,CAAA,UACC,IAAM,EAAoB,GAAI,CAAA,EAAA,EAAA,OAAU,AAAV,EAAY,sBAC1C,EAAkB,IAAI,GAEtB,IAAM,EAAa,SAAS,aAAa,CAAC,uDACpC,EAAY,SAAS,aAAa,CAAC,sDACnC,EAAoB,SAAS,gBAAgB,CAAC,wBAC9C,EAAe,SAAS,gBAAgB,CAAC,8BACzC,EAA2B,SAAS,gBAAgB,CAAC,gCAG3D,AAAA,CAAA,EAAA,EAAA,cAAa,AAAb,EAAe,MAAO,IACpB,GAAI,EAAc,CAChB,IAAM,EAAO,MAAM,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,EAAa,GAAG,EAE/C,EAAyB,OAAO,CAAC,AAAA,GAAK,EAAE,SAAS,CAAG,EAAK,QAAQ,CAAC,MAAM,EAExE,EAAkB,eAAe,GACjC,AAAA,CAAA,EAAA,EAAA,mBAAkB,AAAlB,EAAoB,UAAW,EAAa,GAAG,EAC/C,AAAA,CAAA,EAAA,EAAA,mBAAkB,AAAlB,EAAoB,iBAAkB,EAAK,QAAQ,EAEnD,EAAkB,OAAO,CAAC,AAAA,GAAK,EAAE,SAAS,CAAC,GAAG,CAAC,UACjD,MACE,EAAkB,OAAO,CAAC,AAAA,GAAK,EAAE,SAAS,CAAC,MAAM,CAAC,WAClD,AAAA,CAAA,EAAA,EAAA,mBAAkB,AAAlB,EAAoB,UAAW,IAC/B,AAAA,CAAA,EAAA,EAAA,mBAAkB,AAAlB,EAAoB,iBAAkB,IACtC,EAAyB,OAAO,CAAC,AAAA,GAAK,EAAE,SAAS,CAAG,EAExD,GAEA,EAAW,gBAAgB,CAAC,SAAU,MAAO,IAC3C,EAAE,cAAc,GAEhB,IAAM,EAAgB,CACpB,SAAU,EAAW,QAAQ,CAAC,KAAK,CAAC,IAAI,GACxC,MAAO,EAAW,KAAK,CAAC,KAAK,CAAC,IAAI,GAClC,SAAU,EAAW,QAAQ,CAAC,KAAK,CAAC,IAAI,GACxC,SAAU,EAAE,AACd,CAEA,OAAM,AAAA,CAAA,EAAA,EAAA,MAAK,AAAL,EAAO,EACf,GAEA,EAAU,gBAAgB,CAAC,SAAU,MAAO,IAC1C,EAAE,cAAc,GAEhB,IAAM,EAAgB,CACpB,MAAO,EAAU,KAAK,CAAC,KAAK,CAAC,IAAI,GACjC,SAAU,EAAU,QAAQ,CAAC,KAAK,CAAC,IAAI,EACzC,CAEA,OAAM,AAAA,CAAA,EAAA,EAAA,MAAK,AAAL,EAAO,EACf,GAEA,EAAa,OAAO,CAAC,AAAA,GAAU,EAAO,gBAAgB,CAAC,QAAS,KAC9D,AAAA,CAAA,EAAA,EAAA,MAAK,AAAL,GACF,GACF,CAAA","sources":["<anon>","src/scripts/classes/index.js","src/scripts/classes/ModalWindow.js","src/scripts/registration-auth.script.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire0688\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire0688\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"ciXGU\", function(module, exports) {\n\n$parcel$export(module.exports, \"ModalWindow\", function () { return (parcelRequire(\"fERhu\")).default; });\n\nvar $fERhu = parcelRequire(\"fERhu\");\n\n});\nparcelRegister(\"fERhu\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", function () { return $b663ebeed58d2cae$export$2e2bcd8739ae039; });\nclass $b663ebeed58d2cae$export$2e2bcd8739ae039 {\n    constructor(modalId){\n        this.modalId = modalId;\n        this.mw = document.getElementById(this.modalId);\n        if (!this.mw) throw new Error(`No ${this.modalId} element was found`);\n        this.hideModalWindowOnEscapeEnv = this.hideModalWindowOnEscape.bind(this);\n        this.openModalWindowButtonHandler = this.showModalWindow.bind(this);\n        this.openModalWindowButtons = [];\n    }\n    init(callbackBefore) {\n        this.initCloseModalWindow();\n        this.initOpenButtons(callbackBefore);\n    }\n    initCloseModalWindow() {\n        // Close modal by clicking on button\n        this.closeModalWindowButton = this.mw.querySelector('button[data-role=\"close\"]');\n        if (!this.closeModalWindowButton) throw new Error(`No button[data-role=\"close\"] element was found`);\n        this.closeModalWindowButton.addEventListener(\"click\", this.hideModalWindow.bind(this));\n        // close modal by clicking on empty space\n        this.mw.addEventListener(\"mousedown\", ({ target: target, currentTarget: currentTarget })=>{\n            if (target !== currentTarget) return;\n            this.hideModalWindow();\n        });\n    }\n    initOpenButtons(callbackBefore) {\n        // remove event listeners from buttons\n        this.openModalWindowButtons.forEach((button)=>{\n            button.removeEventListener(\"click\", this.openModalWindowButtonHandler);\n        });\n        this.openModalWindowButtonHandler = (async function(e) {\n            e.preventDefault();\n            if (typeof callbackBefore === 'function') await callbackBefore(e, this);\n            this.showModalWindow();\n        }).bind(this);\n        // open modal by clicking on buttons\n        this.openModalWindowButtons = document.querySelectorAll(`[data-modal-id=\"${this.modalId}\"]`);\n        this.openModalWindowButtons.forEach((button)=>{\n            button.addEventListener(\"click\", this.openModalWindowButtonHandler);\n        });\n    }\n    hideModalWindow() {\n        this.mw.classList.remove(\"active\");\n        window.removeEventListener(\"keydown\", this.hideModalWindowOnEscapeEnv);\n        document.documentElement.style.overflow = \"auto\";\n    }\n    hideModalWindowOnEscape({ key: key }) {\n        if (key !== \"Escape\") return;\n        this.hideModalWindow();\n    }\n    showModalWindow() {\n        this.mw.classList.add(\"active\");\n        window.addEventListener(\"keydown\", this.hideModalWindowOnEscapeEnv);\n        document.documentElement.style.overflow = \"hidden\";\n    }\n}\n\n});\n\n\n\nvar $bi9oi = parcelRequire(\"bi9oi\");\nparcelRequire(\"ciXGU\");\nvar $fERhu = parcelRequire(\"fERhu\");\n\nvar $2GpPp = parcelRequire(\"2GpPp\");\n(async ()=>{\n    const registrationModal = new (0, $fERhu.default)(\"registration-modal\");\n    registrationModal.init();\n    const signinForm = document.querySelector('#registration-modal .forms form[data-role=\"signin\"]');\n    const loginForm = document.querySelector('#registration-modal .forms form[data-role=\"login\"]');\n    const headerAuthButtons = document.querySelectorAll('.header-auth-buttons');\n    const logoutButton = document.querySelectorAll('button[data-role=\"logout\"]');\n    const headerShoppingCartNumber = document.querySelectorAll('.header-shopping-cart-number');\n    (0, $bi9oi.onUserLoggedIn)(async (loggedInUser)=>{\n        if (loggedInUser) {\n            const user = await (0, $bi9oi.getUserById)(loggedInUser.uid);\n            headerShoppingCartNumber.forEach((e)=>e.innerText = user.favBooks.length);\n            registrationModal.hideModalWindow();\n            (0, $2GpPp.localStorageSetItem)('user-id', loggedInUser.uid);\n            (0, $2GpPp.localStorageSetItem)('user-fav-books', user.favBooks);\n            headerAuthButtons.forEach((e)=>e.classList.add('active'));\n        } else {\n            headerAuthButtons.forEach((e)=>e.classList.remove('active'));\n            (0, $2GpPp.localStorageSetItem)('user-id', '');\n            (0, $2GpPp.localStorageSetItem)('user-fav-books', '');\n            headerShoppingCartNumber.forEach((e)=>e.innerText = 0);\n        }\n    });\n    signinForm.addEventListener('submit', async (e)=>{\n        e.preventDefault();\n        const newUserBuffer = {\n            username: signinForm.username.value.trim(),\n            email: signinForm.email.value.trim(),\n            password: signinForm.password.value.trim(),\n            favBooks: []\n        };\n        await (0, $bi9oi.signup)(newUserBuffer);\n    });\n    loginForm.addEventListener('submit', async (e)=>{\n        e.preventDefault();\n        const newUserBuffer = {\n            email: loginForm.email.value.trim(),\n            password: loginForm.password.value.trim()\n        };\n        await (0, $bi9oi.signin)(newUserBuffer);\n    });\n    logoutButton.forEach((button)=>button.addEventListener('click', ()=>{\n            (0, $bi9oi.logout)();\n        }));\n})();\n\n\n//# sourceMappingURL=project-team-10.ba360a66.js.map\n","export {default as ModalWindow} from './ModalWindow';","export default class ModalWindow {\n  constructor(modalId) {\n    this.modalId = modalId;\n    this.mw = document.getElementById(this.modalId);\n\n    if (!this.mw) throw new Error(`No ${this.modalId} element was found`);\n\n    this.hideModalWindowOnEscapeEnv = this.hideModalWindowOnEscape.bind(this);\n    this.openModalWindowButtonHandler = this.showModalWindow.bind(this);\n    this.openModalWindowButtons = [];\n  }\n\n  init(callbackBefore) {\n    this.initCloseModalWindow();\n    this.initOpenButtons(callbackBefore);\n  }\n\n  initCloseModalWindow() {\n    // Close modal by clicking on button\n    this.closeModalWindowButton = this.mw.querySelector(\n      'button[data-role=\"close\"]'\n    );\n\n    if (!this.closeModalWindowButton)\n      throw new Error(`No button[data-role=\"close\"] element was found`);\n\n    this.closeModalWindowButton.addEventListener(\n      \"click\",\n      this.hideModalWindow.bind(this)\n    );\n\n    // close modal by clicking on empty space\n    this.mw.addEventListener(\"mousedown\", ({ target, currentTarget }) => {\n      if (target !== currentTarget) return;\n\n      this.hideModalWindow();\n    });\n  }\n\n  initOpenButtons(callbackBefore) {\n    // remove event listeners from buttons\n    this.openModalWindowButtons.forEach((button) => {\n      button.removeEventListener(\"click\", this.openModalWindowButtonHandler);\n    });\n\n    this.openModalWindowButtonHandler = (async function (e){\n      e.preventDefault();\n      if (typeof callbackBefore === 'function') await callbackBefore(e, this);\n      this.showModalWindow();\n    }).bind(this);\n\n    // open modal by clicking on buttons\n    this.openModalWindowButtons = document.querySelectorAll(\n      `[data-modal-id=\"${this.modalId}\"]`\n    );\n\n    this.openModalWindowButtons.forEach((button) => {\n      button.addEventListener(\"click\", this.openModalWindowButtonHandler);\n    });\n  }\n\n  hideModalWindow() {\n    this.mw.classList.remove(\"active\");\n    window.removeEventListener(\"keydown\", this.hideModalWindowOnEscapeEnv);\n    document.documentElement.style.overflow = \"auto\";\n  }\n\n  hideModalWindowOnEscape({ key }) {\n    if (key !== \"Escape\") return;\n    this.hideModalWindow();\n  }\n\n  showModalWindow() {\n    this.mw.classList.add(\"active\");\n    window.addEventListener(\"keydown\", this.hideModalWindowOnEscapeEnv);\n    document.documentElement.style.overflow = \"hidden\";\n  }\n}\n","import { signup, signin, onUserLoggedIn, logout, getUserById } from \"./firebase\";\nimport { ModalWindow } from \"./classes\";\nimport { localStorageSetItem } from './utils'\n\n(async () => {\n  const registrationModal = new ModalWindow(\"registration-modal\");\n  registrationModal.init();\n\n  const signinForm = document.querySelector('#registration-modal .forms form[data-role=\"signin\"]');\n  const loginForm = document.querySelector('#registration-modal .forms form[data-role=\"login\"]');\n  const headerAuthButtons = document.querySelectorAll('.header-auth-buttons');\n  const logoutButton = document.querySelectorAll('button[data-role=\"logout\"]');\n  const headerShoppingCartNumber = document.querySelectorAll('.header-shopping-cart-number');\n\n\n  onUserLoggedIn(async (loggedInUser) => {\n    if (loggedInUser) {\n      const user = await getUserById(loggedInUser.uid);\n      \n      headerShoppingCartNumber.forEach(e => e.innerText = user.favBooks.length);\n\n      registrationModal.hideModalWindow();\n      localStorageSetItem('user-id', loggedInUser.uid);\n      localStorageSetItem('user-fav-books', user.favBooks);\n      \n      headerAuthButtons.forEach(e => e.classList.add('active'));\n    } else {\n      headerAuthButtons.forEach(e => e.classList.remove('active'));\n      localStorageSetItem('user-id', '');\n      localStorageSetItem('user-fav-books', '');\n      headerShoppingCartNumber.forEach(e => e.innerText = 0);\n    }\n  });\n\n  signinForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const newUserBuffer = {\n      username: signinForm.username.value.trim(),\n      email: signinForm.email.value.trim(),\n      password: signinForm.password.value.trim(),\n      favBooks: []\n    }\n\n    await signup(newUserBuffer);\n  });\n\n  loginForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const newUserBuffer = {\n      email: loginForm.email.value.trim(),\n      password: loginForm.password.value.trim()\n    }\n\n    await signin(newUserBuffer);\n  });\n\n  logoutButton.forEach(button => button.addEventListener('click', () => {\n    logout();\n  }));\n})();"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","default","$b663ebeed58d2cae$export$2e2bcd8739ae039","modalId","mw","document","getElementById","hideModalWindowOnEscapeEnv","hideModalWindowOnEscape","bind","openModalWindowButtonHandler","showModalWindow","openModalWindowButtons","callbackBefore","initCloseModalWindow","initOpenButtons","closeModalWindowButton","querySelector","addEventListener","hideModalWindow","target","currentTarget","forEach","button","removeEventListener","preventDefault","querySelectorAll","classList","remove","documentElement","style","overflow","key","add","$bi9oi","$fERhu","$2GpPp","registrationModal","signinForm","loginForm","headerAuthButtons","logoutButton","headerShoppingCartNumber","onUserLoggedIn","loggedInUser","user","getUserById","uid","innerText","favBooks","length","localStorageSetItem","newUserBuffer","username","value","trim","email","password","signup","signin","logout"],"version":3,"file":"project-team-10.ba360a66.js.map"}