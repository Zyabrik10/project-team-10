{"mappings":"ujBAAA,IAAAA,EAAAC,EAAA,S,oDAYA,MAWMC,GAAM,EAAAF,EAAAG,eAXW,CACrBC,OAAQ,0CACRC,WAAY,wCACZC,UAAW,wBACXC,cAAe,oCACfC,kBAAmB,cACnBC,MAAO,2CACPC,cAAe,iBAKXC,GAAO,EAAAC,EAAAC,SAAQX,GACfY,GAAW,EAAAC,EAAAC,aAAYd,GAGvBe,EAAW,GACXC,EAAUC,SAASC,cAAc,eACjCC,EAAeF,SAASC,cAAc,uBACtCE,EAAkBH,SAASC,cAAc,0BACzCG,EAAkBC,KAAKC,MAAMC,aAAaC,QAAQ,eAclDC,EAAUC,IACdZ,EAASY,EAAEC,OAAOC,KAAKC,QAAUH,EAAEC,OAAOG,MAAMD,OAChDN,aAAaQ,QAAQ,eAAgBV,KAAKW,UAAUlB,SAE7BmB,IAAnBnB,EAASoB,QACXpB,EAASoB,MAAQ,SAEOD,IAAtBnB,EAASqB,WACXrB,EAASqB,SAAW,GAAE,EAIpBC,EAAUV,IACdA,EAAEW,iBACFtB,EAAQuB,QACR,MAAMC,SAAEA,EAAQL,MAAEA,GAAUpB,EACxBN,EAAKgC,YACPC,EAAAC,GAASC,OAAOC,QAAQ,+BAG1B,EAAAnC,EAAAoC,4BAA2BrC,EAAM0B,EAAOK,GACrCO,MAAKC,IAEJ,MAAMC,EAAOD,EAAeC,KAEtBC,EAAK,IAAIC,MACf,EAAAtC,EAAAuC,SAAO,EAAAvC,EAAAwC,KAAIzC,EAAU,SAAWqC,EAAKK,KAAM,CACzCC,WAAYL,IAEdR,EAAAC,GAASC,OAAOY,QAAQ,6BACxBC,YACE,IAAOC,OAAOC,SAAW,oCACzB,IACD,IAEFC,OAAMC,IACaA,EAAMC,KAAxB,MACMC,EAAeF,EAAMG,QAC3BtB,EAAAC,GAASC,OAAOqB,QAAQF,EAAa,GACrC,EAGN9C,SAASiD,iBAAiB,mBAAoBxB,EAAAyB,EAAA,EAtDvB,KACG,OAApB9C,IACFF,EAAaY,MACXV,EAAgBc,MAAMiC,OAAS,EAAI/C,EAAgBc,MAAQ,GAC7Df,EAAgBW,MACdV,EAAgB2C,QAAQI,OAAS,EAAI/C,EAAgB2C,QAAU,GACjEjD,EAAgB,MAAII,EAAaY,MACjChB,EAAmB,SAAIK,EAAgBW,MACvCP,aAAaQ,QAAQ,aAAcV,KAAKW,UAAUlB,I,GA8CiB,MAClEC,IAGHA,EAAQkD,iBAAiB,QAASxB,EAAAyB,EAAA,CAASzC,EAAS,MACpDV,EAAQkD,iBAAiB,SAAU7B,G","sources":["src/js/login.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport Notiflix from 'notiflix';\nimport throttle from 'lodash.throttle';\n\nimport {\n  getAuth,\n  onAuthStateChanged,\n  signInWithEmailAndPassword,\n} from 'firebase/auth';\n\nimport { getDatabase, ref, update } from 'firebase/database';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyDwpmuhImdY7RHC3U0YYZIshSlCJATjNaU',\n  authDomain: 'project-team-10-5792d.firebaseapp.com',\n  projectId: 'project-team-10-5792d',\n  storageBucket: 'project-team-10-5792d.appspot.com',\n  messagingSenderId: '76240638065',\n  appId: '1:76240638065:web:5518f239b638187e380bd0',\n  measurementId: 'G-CCNXH403RH',\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst database = getDatabase(app);\n\n// Inforamtion for the login\nconst formData = {};\nconst loginEl = document.querySelector('.login-form');\nconst emailInputEl = document.querySelector(\"input[name='email']\");\nconst passwordInputEl = document.querySelector(\"input[name='password']\");\nconst gettingFormData = JSON.parse(localStorage.getItem('login-form'));\n\nconst updateFormData = () => {\n  if (gettingFormData !== null) {\n    emailInputEl.value =\n      gettingFormData.email.length > 0 ? gettingFormData.email : '';\n    passwordInputEl.value =\n      gettingFormData.message.length > 0 ? gettingFormData.message : '';\n    formData['email'] = emailInputEl.value;\n    formData['password'] = passwordInputEl.value;\n    localStorage.setItem('login-form', JSON.stringify(formData));\n  }\n};\n\nconst onInput = e => {\n  formData[e.target.name.trim()] = e.target.value.trim();\n  localStorage.setItem('sign-up-form', JSON.stringify(formData));\n\n  if (formData.email === undefined) {\n    formData.email = '';\n  }\n  if (formData.username === undefined) {\n    formData.username = '';\n  }\n};\n\nconst onLogin = e => {\n  e.preventDefault();\n  loginEl.reset();\n  const { password, email } = formData;\n  if (auth.currentUser) {\n    Notiflix.Notify.warning(`You are already signed in!`);\n    return;\n  }\n  signInWithEmailAndPassword(auth, email, password)\n    .then(userCredential => {\n      // Signed in\n      const user = userCredential.user;\n\n      const dt = new Date();\n      update(ref(database, 'users/' + user.uid), {\n        last_login: dt,\n      });\n      Notiflix.Notify.success(`You are logging in now...`);\n      setTimeout(\n        () => (window.location = 'http://localhost:1234/index.html'),\n        3000\n      );\n    })\n    .catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      Notiflix.Notify.failure(errorMessage);\n    });\n};\n\ndocument.addEventListener('DOMContentLoaded', throttle(updateFormData, 500));\nif (!loginEl) {\n  return;\n} else {\n  loginEl.addEventListener('input', throttle(onInput, 500));\n  loginEl.addEventListener('submit', onLogin);\n}\n"],"names":["$gKkQl","parcelRequire","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","$eyjy7","getAuth","database","$jAzyG","getDatabase","formData","loginEl","document","querySelector","emailInputEl","passwordInputEl","gettingFormData","JSON","parse","localStorage","getItem","onInput","e","target","name","trim","value","setItem","stringify","undefined","email","username","onLogin","preventDefault","reset","password","currentUser","$parcel$interopDefault","$7Y9D8","Notify","warning","signInWithEmailAndPassword","then","userCredential","user","dt","Date","update","ref","uid","last_login","success","setTimeout","window","location","catch","error","code","errorMessage","message","failure","addEventListener","$9OeKo","length"],"version":3,"file":"login.69ab6de5.js.map"}